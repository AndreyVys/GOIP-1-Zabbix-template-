<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.4</version>
    <date>2022-01-28T14:56:14Z</date>
    <groups>
        <group>
            <uuid>4ca29258a6df4258b409caa7f0aab00c</uuid>
            <name>Voice</name>
        </group>
    </groups>
    <templates>
        <template>
            <uuid>b6648453e61249a5bce8bfd25bf238ee</uuid>
            <template>GoIP</template>
            <name>GoIP</name>
            <groups>
                <group>
                    <name>Voice</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>a3a2cbe7d2b44f55b51eeafcd65bd703</uuid>
                    <name>Firmware_version</name>
                    <type>HTTP_AGENT</type>
                    <key>fw_ver</key>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$USER}</username>
                    <password>{$PASSWORD}</password>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>.*class=&quot;time_text&quot;&gt;(GHSFVT.*)</parameter>
                                <parameter>\1</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <url>http://{HOST.CONN}/default/en_US/status.html</url>
                    <triggers>
                        <trigger>
                            <uuid>147db61920794a9686b5831007cb3245</uuid>
                            <expression>(last(/GoIP/fw_ver,#1)&lt;&gt;last(/GoIP/fw_ver,#2))=1 and length(last(/GoIP/fw_ver))&gt;0</expression>
                            <name>GSM gateway {HOST.NAME} Firmware has changed</name>
                            <opdata>Firmware version: {ITEM.LASTVALUE1}</opdata>
                            <priority>INFO</priority>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>e6f314b8cfb142e0b6415ba69eb7fe82</uuid>
                    <name>GSM_Status</name>
                    <type>HTTP_AGENT</type>
                    <key>gsm_status</key>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$USER}</username>
                    <password>{$PASSWORD}</password>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>&lt;td height=&quot;25&quot; class=&quot;text2&quot; align=&quot;center&quot; id=&quot;l1_gsm_status&quot;&gt;([^&lt;]+)</parameter>
                                <parameter>\1</parameter>
                            </parameters>
                            <error_handler>CUSTOM_VALUE</error_handler>
                            <error_handler_params>N</error_handler_params>
                        </step>
                    </preprocessing>
                    <url>http://{HOST.CONN}/default/en_US/status.html</url>
                    <triggers>
                        <trigger>
                            <uuid>bdb3e4da09774196b49cb57f74b21c20</uuid>
                            <expression>last(/GoIP/gsm_status,#1)&lt;&gt;&quot;Y&quot;</expression>
                            <name>GSM gateway {HOST.NAME} GSM is not OK</name>
                            <priority>AVERAGE</priority>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>b17a653ba34642d397371ea5cd59ca81</uuid>
                    <name>RSSI</name>
                    <type>HTTP_AGENT</type>
                    <key>rssi</key>
                    <authtype>BASIC</authtype>
                    <username>{$USER}</username>
                    <password>{$PASSWORD}</password>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>&lt;td height=&quot;25&quot; class=&quot;text2&quot; align=&quot;center&quot; id=&quot;l1_gsm_signal&quot;&gt;&amp;nbsp;([^&lt;]+)</parameter>
                                <parameter>\1</parameter>
                            </parameters>
                            <error_handler>CUSTOM_VALUE</error_handler>
                            <error_handler_params>99</error_handler_params>
                        </step>
                    </preprocessing>
                    <url>http://{HOST.CONN}/default/en_US/status.html</url>
                    <triggers>
                        <trigger>
                            <uuid>0233df11ff7442ff84c69e1da10c27a5</uuid>
                            <expression>last(/GoIP/rssi,#1)&gt;=99</expression>
                            <name>GSM gateway {HOST.NAME} GSM SIgnal lost</name>
                            <opdata>SIgnal: {ITEM.LASTVALUE1}</opdata>
                            <priority>AVERAGE</priority>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>e9092736dc2d43199a27099222757c46</uuid>
                    <name>SIM_Status</name>
                    <type>HTTP_AGENT</type>
                    <key>sim_status</key>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$USER}</username>
                    <password>{$PASSWORD}</password>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>&lt;td height=&quot;25&quot; class=&quot;text2&quot; align=&quot;center&quot; id=&quot;l1_gsm_sim&quot;&gt;([^&lt;]+)</parameter>
                                <parameter>\1</parameter>
                            </parameters>
                            <error_handler>CUSTOM_VALUE</error_handler>
                            <error_handler_params>N</error_handler_params>
                        </step>
                    </preprocessing>
                    <url>http://{HOST.CONN}/default/en_US/status.html</url>
                    <triggers>
                        <trigger>
                            <uuid>fc128cfcb8de48e3a7c1d30cdb4a31bd</uuid>
                            <expression>last(/GoIP/sim_status,#1)&lt;&gt;&quot;Y&quot;</expression>
                            <name>GSM gateway {HOST.NAME} SIM is not OK</name>
                            <priority>AVERAGE</priority>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>3b39e6351d444c86ba062922a16b174e</uuid>
                    <name>Uptime</name>
                    <type>HTTP_AGENT</type>
                    <key>uptime</key>
                    <value_type>FLOAT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$USER}</username>
                    <password>{$PASSWORD}</password>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>.*var uptime_s=&quot;([^&quot;;]+)</parameter>
                                <parameter>\1</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <url>http://{HOST.CONN}/default/en_US/status.html</url>
                    <triggers>
                        <trigger>
                            <uuid>280e2fca0bd04d058995aca461b61a88</uuid>
                            <expression>last(/GoIP/uptime,#1)&lt;600</expression>
                            <name>GSM gateway {HOST.NAME} uptime &lt; 10m</name>
                            <opdata>Uptime: {ITEM.LASTVALUE1}</opdata>
                            <priority>WARNING</priority>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>2434bc9d0c054b38a55b62b944b86b0a</uuid>
                    <name>VOIP_Status</name>
                    <type>HTTP_AGENT</type>
                    <key>voip_status</key>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$USER}</username>
                    <password>{$PASSWORD}</password>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>&lt;td height=&quot;25&quot; class=&quot;text&quot; align=&quot;center&quot; id=&quot;l1_status_line&quot;&gt;([^&lt;]+)</parameter>
                                <parameter>\1</parameter>
                            </parameters>
                            <error_handler>CUSTOM_VALUE</error_handler>
                            <error_handler_params>N</error_handler_params>
                        </step>
                    </preprocessing>
                    <url>http://{HOST.CONN}/default/en_US/status.html</url>
                    <triggers>
                        <trigger>
                            <uuid>fdfff81eaa434b7988fb2ce2c195d9d7</uuid>
                            <expression>last(/GoIP/voip_status,#1)&lt;&gt;&quot;Y&quot;</expression>
                            <name>GSM gateway {HOST.NAME} VOIP is not OK</name>
                            <priority>AVERAGE</priority>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
            </items>
            <httptests>
                <httptest>
                    <uuid>c148b47e44b44097bd2cee90cd6c83b1</uuid>
                    <name>GOIP Availability</name>
                    <steps>
                        <step>
                            <name>GOIP</name>
                            <url>http://{HOST.CONN}/default/en_US/status.html</url>
                            <follow_redirects>NO</follow_redirects>
                        </step>
                    </steps>
                </httptest>
            </httptests>
        </template>
    </templates>
    <triggers>
        <trigger>
            <uuid>cb6acd8766a6464abfc89e40cd36b76a</uuid>
            <expression>last(/GoIP/web.test.fail[GOIP Availability],#1)&lt;&gt;0</expression>
            <name>GSM gateway {HOST.NAME} unavailable</name>
            <priority>AVERAGE</priority>
            <manual_close>YES</manual_close>
        </trigger>
    </triggers>
    <graphs>
        <graph>
            <uuid>e7368458fb0248168358ed7c760f62d3</uuid>
            <name>GOIP_RSSI</name>
            <graph_items>
                <graph_item>
                    <sortorder>1</sortorder>
                    <color>1A7C11</color>
                    <item>
                        <host>GoIP</host>
                        <key>rssi</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
        <graph>
            <uuid>f72e3992fff540c49c705663fda750cb</uuid>
            <name>Uptime</name>
            <graph_items>
                <graph_item>
                    <sortorder>1</sortorder>
                    <color>1A7C11</color>
                    <item>
                        <host>GoIP</host>
                        <key>uptime</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
    </graphs>
</zabbix_export>
